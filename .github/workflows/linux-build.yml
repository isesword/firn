# name: linux-build

# on:
#   push:
#     branches: [main]
#   pull_request:
#     branches: [main]
#   workflow_dispatch:

# jobs:
#   build-linux:
#     runs-on: ubuntu-22.04
#     env:
#       CGO_ENABLED: 1
#       CGO_LDFLAGS: -w
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4
#         with:
#           fetch-depth: 0

#       - name: Set up Go
#         uses: actions/setup-go@v5
#         with:
#           go-version-file: go.mod
#           cache: true

#       - name: Set up Rust
#         uses: dtolnay/rust-toolchain@stable
#         with:
#           targets: x86_64-unknown-linux-gnu

#       - name: Cache cargo registry
#         uses: actions/cache@v4
#         with:
#           path: |
#             ~/.cargo/registry
#             ~/.cargo/git
#           key: ${{ runner.os }}-cargo-${{ hashFiles('rust/Cargo.lock') }}
#           restore-keys: |
#             ${{ runner.os }}-cargo-

#       - name: Cache cargo target
#         uses: actions/cache@v4
#         with:
#           path: rust/target
#           key: ${{ runner.os }}-cargo-target-${{ hashFiles('rust/Cargo.lock') }}
#           restore-keys: |
#             ${{ runner.os }}-cargo-target-

#       - name: Prepare lib directory
#         run: mkdir -p lib

#       - name: Build Rust static library
#         run: ./scripts/build_rust.sh

#       # - name: Run Go tests (polars)
#       #   run: go test ./polars -v

#       - name: Package Linux artifacts
#         run: |
#           tar -czf firn-linux-amd64.tar.gz \
#             lib/libfirn_linux_amd64.a \
#             polars/firn.h \
#             README.md

#       - name: Upload Linux artifact
#         uses: actions/upload-artifact@v4
#         with:
#           name: firn-linux-amd64
#           path: firn-linux-amd64.tar.gz
